Script started on Sat Jun 30 15:16:53 2018
[?1034h[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:16:53[1;37m$ exitansible-playbook ansible/debug.yml 
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:18:58[1;37m$ exitansible-playbook ansible/debug.yml 

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
ok: [52.19.122.110]
ok: [34.247.244.205]
ok: [54.77.245.171]
ok: [34.254.96.191]
ok: [52.49.94.125]
ok: [34.247.186.137]

TASK [debug] ***************************************************************************************************************************
ok: [54.77.245.171] => {
    "groups": {
        "all": [
            "54.77.245.171", 
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "consul_agents": [
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191"
        ], 
        "consul_master": [
            "54.77.245.171"
        ], 
        "consul_servers": [
            "54.77.245.171", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "ungrouped": []
    }
}
ok: [52.49.94.125] => {
    "groups": {
        "all": [
            "54.77.245.171", 
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "consul_agents": [
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191"
        ], 
        "consul_master": [
            "54.77.245.171"
        ], 
        "consul_servers": [
            "54.77.245.171", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "ungrouped": []
    }
}
ok: [52.19.122.110] => {
    "groups": {
        "all": [
            "54.77.245.171", 
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "consul_agents": [
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191"
        ], 
        "consul_master": [
            "54.77.245.171"
        ], 
        "consul_servers": [
            "54.77.245.171", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "ungrouped": []
    }
}
ok: [34.254.96.191] => {
    "groups": {
        "all": [
            "54.77.245.171", 
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "consul_agents": [
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191"
        ], 
        "consul_master": [
            "54.77.245.171"
        ], 
        "consul_servers": [
            "54.77.245.171", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "ungrouped": []
    }
}
ok: [34.247.244.205] => {
    "groups": {
        "all": [
            "54.77.245.171", 
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "consul_agents": [
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191"
        ], 
        "consul_master": [
            "54.77.245.171"
        ], 
        "consul_servers": [
            "54.77.245.171", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "ungrouped": []
    }
}
ok: [34.247.186.137] => {
    "groups": {
        "all": [
            "54.77.245.171", 
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "consul_agents": [
            "52.49.94.125", 
            "52.19.122.110", 
            "34.254.96.191"
        ], 
        "consul_master": [
            "54.77.245.171"
        ], 
        "consul_servers": [
            "54.77.245.171", 
            "34.247.244.205", 
            "34.247.186.137"
        ], 
        "ungrouped": []
    }
}

PLAY RECAP *****************************************************************************************************************************
34.247.186.137             : ok=2    changed=0    unreachable=0    failed=0   
34.247.244.205             : ok=2    changed=0    unreachable=0    failed=0   
34.254.96.191              : ok=2    changed=0    unreachable=0    failed=0   
52.19.122.110              : ok=2    changed=0    unreachable=0    failed=0   
52.49.94.125               : ok=2    changed=0    unreachable=0    failed=0   
54.77.245.171              : ok=2    changed=0    unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:19:06[1;37m$ ansible-playbook ansible/debug.yml 

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
ok: [54.77.245.171]
ok: [52.49.94.125]
ok: [34.247.244.205]
ok: [34.254.96.191]
ok: [52.19.122.110]
ok: [34.247.186.137]

TASK [debug] ***************************************************************************************************************************
ok: [54.77.245.171] => {
    "groups['consul_master']": [
        "54.77.245.171"
    ]
}
ok: [52.49.94.125] => {
    "groups['consul_master']": [
        "54.77.245.171"
    ]
}
ok: [52.19.122.110] => {
    "groups['consul_master']": [
        "54.77.245.171"
    ]
}
ok: [34.254.96.191] => {
    "groups['consul_master']": [
        "54.77.245.171"
    ]
}
ok: [34.247.244.205] => {
    "groups['consul_master']": [
        "54.77.245.171"
    ]
}
ok: [34.247.186.137] => {
    "groups['consul_master']": [
        "54.77.245.171"
    ]
}

PLAY RECAP *****************************************************************************************************************************
34.247.186.137             : ok=2    changed=0    unreachable=0    failed=0   
34.247.244.205             : ok=2    changed=0    unreachable=0    failed=0   
34.254.96.191              : ok=2    changed=0    unreachable=0    failed=0   
52.19.122.110              : ok=2    changed=0    unreachable=0    failed=0   
52.49.94.125               : ok=2    changed=0    unreachable=0    failed=0   
54.77.245.171              : ok=2    changed=0    unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:19:35[1;37m$ ansible-playbook ansible/debug.yml 

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
ok: [52.49.94.125]
ok: [34.247.244.205]
ok: [34.254.96.191]
ok: [54.77.245.171]
ok: [52.19.122.110]
ok: [34.247.186.137]

TASK [debug] ***************************************************************************************************************************
ok: [54.77.245.171] => {
    "groups['consul_master'][0]": "54.77.245.171"
}
ok: [52.49.94.125] => {
    "groups['consul_master'][0]": "54.77.245.171"
}
ok: [52.19.122.110] => {
    "groups['consul_master'][0]": "54.77.245.171"
}
ok: [34.254.96.191] => {
    "groups['consul_master'][0]": "54.77.245.171"
}
ok: [34.247.244.205] => {
    "groups['consul_master'][0]": "54.77.245.171"
}
ok: [34.247.186.137] => {
    "groups['consul_master'][0]": "54.77.245.171"
}

PLAY RECAP *****************************************************************************************************************************
34.247.186.137             : ok=2    changed=0    unreachable=0    failed=0   
34.247.244.205             : ok=2    changed=0    unreachable=0    failed=0   
34.254.96.191              : ok=2    changed=0    unreachable=0    failed=0   
52.19.122.110              : ok=2    changed=0    unreachable=0    failed=0   
52.49.94.125               : ok=2    changed=0    unreachable=0    failed=0   
54.77.245.171              : ok=2    changed=0    unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:19:50[1;37m$ ansible-playbook ansible/debug.yml 

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
ok: [52.19.122.110]
ok: [34.247.244.205]
ok: [34.254.96.191]
ok: [52.49.94.125]
ok: [54.77.245.171]
ok: [34.247.186.137]

TASK [debug] ***************************************************************************************************************************
ok: [54.77.245.171] => {
    "hostvars[groups['consul_master'][0]].ansible_eth0.ipv4['address']": "172.31.15.32"
}
ok: [52.49.94.125] => {
    "hostvars[groups['consul_master'][0]].ansible_eth0.ipv4['address']": "172.31.15.32"
}
ok: [52.19.122.110] => {
    "hostvars[groups['consul_master'][0]].ansible_eth0.ipv4['address']": "172.31.15.32"
}
ok: [34.254.96.191] => {
    "hostvars[groups['consul_master'][0]].ansible_eth0.ipv4['address']": "172.31.15.32"
}
ok: [34.247.244.205] => {
    "hostvars[groups['consul_master'][0]].ansible_eth0.ipv4['address']": "172.31.15.32"
}
ok: [34.247.186.137] => {
    "hostvars[groups['consul_master'][0]].ansible_eth0.ipv4['address']": "172.31.15.32"
}

PLAY RECAP *****************************************************************************************************************************
34.247.186.137             : ok=2    changed=0    unreachable=0    failed=0   
34.247.244.205             : ok=2    changed=0    unreachable=0    failed=0   
34.254.96.191              : ok=2    changed=0    unreachable=0    failed=0   
52.19.122.110              : ok=2    changed=0    unreachable=0    failed=0   
52.49.94.125               : ok=2    changed=0    unreachable=0    failed=0   
54.77.245.171              : ok=2    changed=0    unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:20:37[1;37m$ 
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:22:26[1;37m$ 
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:22:26[1;37m$ ansible-playbook ansible/debug.yml [K[K[K
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:22:28[1;37m$ ansible-playbook ansible/debug.yml [K[K[K[K[K[K[K[K[K[Kconverge.
[0;31mERROR! the playbook: ansible/converge. could not be found[0m
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:22:43[1;37m$ 
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:22:43[1;37m$ ansible-playbook ansible/converge.yml 

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : install unzip] *******************************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : download consul] *****************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : unarchive consul] ****************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : create consul user] **************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : create consul data dir] **********************************************************************************************
[0;33mchanged: [34.247.244.205][0m
[0;33mchanged: [52.19.122.110][0m
[0;33mchanged: [54.77.245.171][0m
[0;33mchanged: [34.247.186.137][0m
[0;33mchanged: [52.49.94.125][0m
[0;33mchanged: [34.254.96.191][0m

TASK [consul.lg : create consul config dir] ********************************************************************************************
[0;33mchanged: [54.77.245.171][0m
[0;33mchanged: [34.247.244.205][0m
[0;33mchanged: [34.247.186.137][0m
[0;33mchanged: [52.49.94.125][0m
[0;33mchanged: [52.19.122.110][0m
[0;33mchanged: [34.254.96.191][0m

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

PLAY [consul_servers] ******************************************************************************************************************

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m

TASK [consul.lg : Configure systemd unit] **********************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m

TASK [consul.lg : Template consult config] *********************************************************************************************
[0;33mchanged: [34.247.244.205][0m
[0;33mchanged: [54.77.245.171][0m
[0;33mchanged: [34.247.186.137][0m

TASK [consul.lg : enable consul service] ***********************************************************************************************
[0;32mok: [34.247.244.205][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.186.137][0m

PLAY [all:!consul_servers] *************************************************************************************************************

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : Configure systemd unit] **********************************************************************************************
[0;32mok: [34.254.96.191][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m

TASK [consul.lg : Template consult config] *********************************************************************************************
[0;32mok: [34.254.96.191][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m

TASK [consul.lg : enable consul service] ***********************************************************************************************
[0;32mok: [34.254.96.191][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m

PLAY [all:!consul_master] **************************************************************************************************************

TASK [shell] ***************************************************************************************************************************
[0;31mfatal: [34.254.96.191]: FAILED! => {"changed": true, "cmd": "consul join 172.31.15.32", "delta": "0:00:10.024410", "end": "2018-06-30 14:23:27.199628", "msg": "non-zero return code", "rc": 1, "start": "2018-06-30 14:23:17.175218", "stderr": "Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:\n\n* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)\nFailed to join any nodes.", "stderr_lines": ["Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:", "", "* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)", "Failed to join any nodes."], "stdout": "", "stdout_lines": []}[0m
[0;31mfatal: [34.247.244.205]: FAILED! => {"changed": true, "cmd": "consul join 172.31.15.32", "delta": "0:00:10.022821", "end": "2018-06-30 14:23:27.338865", "msg": "non-zero return code", "rc": 1, "start": "2018-06-30 14:23:17.316044", "stderr": "Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:\n\n* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)\nFailed to join any nodes.", "stderr_lines": ["Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:", "", "* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)", "Failed to join any nodes."], "stdout": "", "stdout_lines": []}[0m
[0;31mfatal: [52.49.94.125]: FAILED! => {"changed": true, "cmd": "consul join 172.31.15.32", "delta": "0:00:10.025487", "end": "2018-06-30 14:23:27.350604", "msg": "non-zero return code", "rc": 1, "start": "2018-06-30 14:23:17.325117", "stderr": "Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:\n\n* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)\nFailed to join any nodes.", "stderr_lines": ["Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:", "", "* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)", "Failed to join any nodes."], "stdout": "", "stdout_lines": []}[0m
[0;31mfatal: [34.247.186.137]: FAILED! => {"changed": true, "cmd": "consul join 172.31.15.32", "delta": "0:00:10.025700", "end": "2018-06-30 14:23:27.352674", "msg": "non-zero return code", "rc": 1, "start": "2018-06-30 14:23:17.326974", "stderr": "Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:\n\n* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)\nFailed to join any nodes.", "stderr_lines": ["Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:", "", "* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)", "Failed to join any nodes."], "stdout": "", "stdout_lines": []}[0m
[0;31mfatal: [52.19.122.110]: FAILED! => {"changed": true, "cmd": "consul join 172.31.15.32", "delta": "0:00:10.028445", "end": "2018-06-30 14:23:27.367832", "msg": "non-zero return code", "rc": 1, "start": "2018-06-30 14:23:17.339387", "stderr": "Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:\n\n* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)\nFailed to join any nodes.", "stderr_lines": ["Error joining address '172.31.15.32': Unexpected response code: 500 (1 error(s) occurred:", "", "* Failed to join 172.31.15.32: dial tcp 172.31.15.32:8301: i/o timeout)", "Failed to join any nodes."], "stdout": "", "stdout_lines": []}[0m
	to retry, use: --limit @/Users/luke/GitHub/HashiDays/aws_config/ansible/converge.retry

PLAY RECAP *****************************************************************************************************************************
[0;31m34.247.186.137[0m             : [0;32mok=12  [0m [0;33mchanged=3   [0m unreachable=0    [0;31mfailed=1   [0m
[0;31m34.247.244.205[0m             : [0;32mok=12  [0m [0;33mchanged=3   [0m unreachable=0    [0;31mfailed=1   [0m
[0;31m34.254.96.191[0m              : [0;32mok=12  [0m [0;33mchanged=2   [0m unreachable=0    [0;31mfailed=1   [0m
[0;31m52.19.122.110[0m              : [0;32mok=12  [0m [0;33mchanged=2   [0m unreachable=0    [0;31mfailed=1   [0m
[0;31m52.49.94.125[0m               : [0;32mok=12  [0m [0;33mchanged=2   [0m unreachable=0    [0;31mfailed=1   [0m
[0;33m54.77.245.171[0m              : [0;32mok=12  [0m [0;33mchanged=3   [0m unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:23:27[1;37m$ ansible-playbook ansible/converge.yml [Kdebug.yml [1Pconverge.yml 

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : install unzip] *******************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : download consul] *****************************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : unarchive consul] ****************************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : create consul user] **************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : create consul data dir] **********************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : create consul config dir] ********************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

PLAY [consul_servers] ******************************************************************************************************************

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [34.247.186.137][0m

TASK [consul.lg : Configure systemd unit] **********************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m

TASK [consul.lg : Template consult config] *********************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [34.247.244.205][0m
[0;32mok: [54.77.245.171][0m

TASK [consul.lg : enable consul service] ***********************************************************************************************
[0;32mok: [34.247.186.137][0m
[0;32mok: [54.77.245.171][0m
[0;32mok: [34.247.244.205][0m

PLAY [all:!consul_servers] *************************************************************************************************************

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : Configure systemd unit] **********************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [34.254.96.191][0m
[0;32mok: [52.19.122.110][0m

TASK [consul.lg : Template consult config] *********************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

TASK [consul.lg : enable consul service] ***********************************************************************************************
[0;32mok: [52.49.94.125][0m
[0;32mok: [52.19.122.110][0m
[0;32mok: [34.254.96.191][0m

PLAY [all:!consul_master] **************************************************************************************************************

TASK [shell] ***************************************************************************************************************************
[0;33mchanged: [52.49.94.125][0m
[0;33mchanged: [34.247.186.137][0m
[0;33mchanged: [34.254.96.191][0m
[0;33mchanged: [34.247.244.205][0m
[0;33mchanged: [52.19.122.110][0m

PLAY RECAP *****************************************************************************************************************************
[0;33m34.247.186.137[0m             : [0;32mok=13  [0m [0;33mchanged=1   [0m unreachable=0    failed=0   
[0;33m34.247.244.205[0m             : [0;32mok=13  [0m [0;33mchanged=1   [0m unreachable=0    failed=0   
[0;33m34.254.96.191[0m              : [0;32mok=13  [0m [0;33mchanged=1   [0m unreachable=0    failed=0   
[0;33m52.19.122.110[0m              : [0;32mok=13  [0m [0;33mchanged=1   [0m unreachable=0    failed=0   
[0;33m52.49.94.125[0m               : [0;32mok=13  [0m [0;33mchanged=1   [0m unreachable=0    failed=0   
[0;32m54.77.245.171[0m              : [0;32mok=12  [0m changed=0    unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:27:45[1;37m$ cd ../aws
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws[33m (master)[00m
[1;31m15:28:36[1;37m$ terraform destroy
[0m[1maws_key_pair.deployer: Refreshing state... (ID: deployer-key)[0m
[0m[1mdata.aws_ami.amazon-linux-2: Refreshing state...[0m
[0m[1maws_instance.web[0]: Refreshing state... (ID: i-0fae27108c68a3dc4)[0m
[0m[1maws_instance.web[1]: Refreshing state... (ID: i-0b53b070e0bc22d4b)[0m
[0m[1maws_instance.web[2]: Refreshing state... (ID: i-0d0f94f0f5f6adcc0)[0m
[0m[1maws_instance.web[2]: Refreshing state... (ID: i-0d0730d7bd14dadda)[0m
[0m[1maws_instance.web[0]: Refreshing state... (ID: i-0401b7b151f7e4b4a)[0m
[0m[1maws_instance.web[1]: Refreshing state... (ID: i-0958ed83f5ceb7a31)[0m

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  [31m-[0m destroy
[0m
Terraform will perform the following actions:

[31m  [31m-[0m [31maws_key_pair.deployer
[0m[0m
[0m[31m  [31m-[0m [31mmodule.consul_servers.aws_instance.web[0]
[0m[0m
[0m[31m  [31m-[0m [31mmodule.consul_servers.aws_instance.web[1]
[0m[0m
[0m[31m  [31m-[0m [31mmodule.consul_servers.aws_instance.web[2]
[0m[0m
[0m[31m  [31m-[0m [31mmodule.hosts.aws_instance.web[0]
[0m[0m
[0m[31m  [31m-[0m [31mmodule.hosts.aws_instance.web[1]
[0m[0m
[0m[31m  [31m-[0m [31mmodule.hosts.aws_instance.web[2]
[0m[0m
[0m
[0m[1mPlan:[0m 0 to add, 0 to change, 7 to destroy.[0m

[0m[1mDo you really want to destroy?[0m
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only 'yes' will be accepted to confirm.

  [1mEnter a value:[0m [0myes

[0m[1mmodule.consul_servers.aws_instance.web[1]: Destroying... (ID: i-0b53b070e0bc22d4b)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[2]: Destroying... (ID: i-0d0730d7bd14dadda)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[2]: Destroying... (ID: i-0d0f94f0f5f6adcc0)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[0]: Destroying... (ID: i-0401b7b151f7e4b4a)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[1]: Destroying... (ID: i-0958ed83f5ceb7a31)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[0]: Destroying... (ID: i-0fae27108c68a3dc4)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.1: Still destroying... (ID: i-0b53b070e0bc22d4b, 10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still destroying... (ID: i-0401b7b151f7e4b4a, 10s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still destroying... (ID: i-0d0730d7bd14dadda, 10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still destroying... (ID: i-0958ed83f5ceb7a31, 10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.2: Still destroying... (ID: i-0d0f94f0f5f6adcc0, 10s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still destroying... (ID: i-0fae27108c68a3dc4, 10s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still destroying... (ID: i-0d0730d7bd14dadda, 20s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still destroying... (ID: i-0958ed83f5ceb7a31, 20s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.2: Still destroying... (ID: i-0d0f94f0f5f6adcc0, 20s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.1: Still destroying... (ID: i-0b53b070e0bc22d4b, 20s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still destroying... (ID: i-0401b7b151f7e4b4a, 20s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still destroying... (ID: i-0fae27108c68a3dc4, 20s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still destroying... (ID: i-0d0730d7bd14dadda, 30s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.1: Still destroying... (ID: i-0b53b070e0bc22d4b, 30s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still destroying... (ID: i-0958ed83f5ceb7a31, 30s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still destroying... (ID: i-0401b7b151f7e4b4a, 30s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.2: Still destroying... (ID: i-0d0f94f0f5f6adcc0, 30s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still destroying... (ID: i-0fae27108c68a3dc4, 30s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still destroying... (ID: i-0958ed83f5ceb7a31, 40s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still destroying... (ID: i-0401b7b151f7e4b4a, 40s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.2: Still destroying... (ID: i-0d0f94f0f5f6adcc0, 40s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still destroying... (ID: i-0d0730d7bd14dadda, 40s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still destroying... (ID: i-0fae27108c68a3dc4, 40s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.1: Still destroying... (ID: i-0b53b070e0bc22d4b, 40s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[1]: Destruction complete after 40s[0m[0m
[0m[1mmodule.hosts.aws_instance.web[2]: Destruction complete after 40s[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still destroying... (ID: i-0d0730d7bd14dadda, 50s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still destroying... (ID: i-0fae27108c68a3dc4, 50s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still destroying... (ID: i-0958ed83f5ceb7a31, 50s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still destroying... (ID: i-0401b7b151f7e4b4a, 50s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still destroying... (ID: i-0d0730d7bd14dadda, 1m0s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still destroying... (ID: i-0fae27108c68a3dc4, 1m0s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still destroying... (ID: i-0958ed83f5ceb7a31, 1m0s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still destroying... (ID: i-0401b7b151f7e4b4a, 1m0s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[0]: Destruction complete after 1m0s[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[2]: Destruction complete after 1m0s[0m[0m
[0m[1mmodule.hosts.aws_instance.web[1]: Destruction complete after 1m0s[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[0]: Destruction complete after 1m1s[0m[0m
[0m[1maws_key_pair.deployer: Destroying... (ID: deployer-key)[0m[0m
[0m[1maws_key_pair.deployer: Destruction complete after 0s[0m[0m
[0m[1m[32m
Destroy complete! Resources: 7 destroyed.[0m
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws[33m (master)[00m
[1;31m15:29:47[1;37m$ cd ..
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32mHashiDays[33m (master)[00m
[1;31m15:29:55[1;37m$ cd aws_config/
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:29:57[1;37m$ ls
ansible			consul_commands.txt	log
ansible.cfg		hosts			terraform.tfstate
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:29:58[1;37m$ te[K[Kansible-playbook ansible/converge.yml 
[1;35m [WARNING]:  * Failed to parse /Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py with script plugin: Inventory script[0m
[1;35m(/Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py) had an execution error: [31mThe state file either has no outputs defined, or[0m
[1;35mall the defined outputs are empty. Please define an output in your configuration with the `output` keyword and run `terraform refresh`[0m
[1;35mfor it to become available. If you are using interpolation, please verify the interpolated value is not empty. You can use the[0m
[1;35m`terraform console` command to assist.[0m[0m Traceback (most recent call last):   File[0m
[1;35m"/Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py", line 29, in <module>     pto =[0m
[1;35mparseTfOut('/Users/luke/GitHub/HashiDays/aws')   File "/Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py", line 11, in parseTfOut[0m
[1;35m"-json",   File "/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 336, in[0m
[1;35mcheck_output     **kwargs).stdout   File[0m
[1;35m"/usr/local/Cellar/python/3.6.5_1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py", line 418, in run[0m
[1;35moutput=stdout, stderr=stderr) subprocess.CalledProcessError: Command '['terraform', 'output',[0m
[1;35m'-state=/Users/luke/GitHub/HashiDays/aws/terraform.tfstate', '-json']' returned non-zero exit status 1.[0m
[1;35m[0m
[1;35m [WARNING]:  * Failed to parse /Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py with ini plugin:[0m
[1;35m/Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py:2: Expected key=value host variable assignment, got: subprocess[0m
[1;35m[0m
[1;35m [WARNING]: Unable to parse /Users/luke/GitHub/HashiDays/aws_config/hosts/tf_inv.py as an inventory source[0m
[1;35m[0m
[1;35m [WARNING]: Unable to parse /Users/luke/GitHub/HashiDays/aws_config/hosts as an inventory source[0m
[1;35m[0m
[1;35m [WARNING]: No inventory was parsed, only implicit localhost is available[0m
[1;35m[0m
[1;35m [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'[0m
[1;35m[0m

PLAY [all] *****************************************************************************************************************************
[0;36mskipping: no hosts matched[0m
[1;35m [WARNING]: Could not match supplied host pattern, ignoring: consul_servers[0m
[1;35m[0m

PLAY [consul_servers] ******************************************************************************************************************
[0;36mskipping: no hosts matched[0m

PLAY [all:!consul_servers] *************************************************************************************************************
[0;36mskipping: no hosts matched[0m
[1;35m [WARNING]: Could not match supplied host pattern, ignoring: consul_master[0m
[1;35m[0m

PLAY [all:!consul_master] **************************************************************************************************************
[0;36mskipping: no hosts matched[0m

PLAY RECAP *****************************************************************************************************************************

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:30:07[1;37m$ cd ../aws
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws[33m (master)[00m
[1;31m15:30:14[1;37m$ terraform apply
[0m[1mdata.aws_ami.amazon-linux-2: Refreshing state...[0m

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  [32m+[0m create
[0m
Terraform will perform the following actions:

[32m  [32m+[0m [32maws_key_pair.deployer
[0m      id:                           <computed>
      fingerprint:                  <computed>
      key_name:                     "deployer-key"
      public_key:                   "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC4sM8tsJZ9MLHMqmxcFpq9IPDuOqsYNOgY7RILou25xj+qZGL6RmAClsGOTh/l5BREx8Ue31yvHkw82tvP+pQ2hgw3MkBDEU2Nq1WV+k74bUXxptZ/MUWq/qUyKXymvbSrdM4mFOdwi8HWF+5XMUvI1CIbxV6Xbrv673FudKNYNP4/9xZ1wxmUnCHTKyfBn28z4K/IQLGeM0Q6Dzjou1M2pEusziXxyo/F8M7IRpHwwMVGPmqKAJagfadGgiYyUb4mEDIL5CSTNMr6dseyQ1UHa2xGCl8qEmk9o8hQQ7mz2zXge1EnQCIg5oeZfGwVGpe+cO1zU0a7T22B6g+9i6s5 luke@Lukes-MBP"
[0m
[0m[32m  [32m+[0m [32mmodule.consul_servers.aws_instance.web[0]
[0m      id:                           <computed>
      ami:                          "ami-466768ac"
      associate_public_ip_address:  <computed>
      availability_zone:            <computed>
      ebs_block_device.#:           <computed>
      ephemeral_block_device.#:     <computed>
      get_password_data:            "false"
      instance_state:               <computed>
      instance_type:                "t2.micro"
      ipv6_address_count:           <computed>
      ipv6_addresses.#:             <computed>
      key_name:                     "deployer-key"
      network_interface.#:          <computed>
      network_interface_id:         <computed>
      password_data:                <computed>
      placement_group:              <computed>
      primary_network_interface_id: <computed>
      private_dns:                  <computed>
      private_ip:                   <computed>
      public_dns:                   <computed>
      public_ip:                    <computed>
      root_block_device.#:          <computed>
      security_groups.#:            <computed>
      source_dest_check:            "true"
      subnet_id:                    <computed>
      tags.%:                       "1"
      tags.Created-By:              "Terraform"
      tenancy:                      <computed>
      volume_tags.%:                <computed>
      vpc_security_group_ids.#:     <computed>
[0m
[0m[32m  [32m+[0m [32mmodule.consul_servers.aws_instance.web[1]
[0m      id:                           <computed>
      ami:                          "ami-466768ac"
      associate_public_ip_address:  <computed>
      availability_zone:            <computed>
      ebs_block_device.#:           <computed>
      ephemeral_block_device.#:     <computed>
      get_password_data:            "false"
      instance_state:               <computed>
      instance_type:                "t2.micro"
      ipv6_address_count:           <computed>
      ipv6_addresses.#:             <computed>
      key_name:                     "deployer-key"
      network_interface.#:          <computed>
      network_interface_id:         <computed>
      password_data:                <computed>
      placement_group:              <computed>
      primary_network_interface_id: <computed>
      private_dns:                  <computed>
      private_ip:                   <computed>
      public_dns:                   <computed>
      public_ip:                    <computed>
      root_block_device.#:          <computed>
      security_groups.#:            <computed>
      source_dest_check:            "true"
      subnet_id:                    <computed>
      tags.%:                       "1"
      tags.Created-By:              "Terraform"
      tenancy:                      <computed>
      volume_tags.%:                <computed>
      vpc_security_group_ids.#:     <computed>
[0m
[0m[32m  [32m+[0m [32mmodule.consul_servers.aws_instance.web[2]
[0m      id:                           <computed>
      ami:                          "ami-466768ac"
      associate_public_ip_address:  <computed>
      availability_zone:            <computed>
      ebs_block_device.#:           <computed>
      ephemeral_block_device.#:     <computed>
      get_password_data:            "false"
      instance_state:               <computed>
      instance_type:                "t2.micro"
      ipv6_address_count:           <computed>
      ipv6_addresses.#:             <computed>
      key_name:                     "deployer-key"
      network_interface.#:          <computed>
      network_interface_id:         <computed>
      password_data:                <computed>
      placement_group:              <computed>
      primary_network_interface_id: <computed>
      private_dns:                  <computed>
      private_ip:                   <computed>
      public_dns:                   <computed>
      public_ip:                    <computed>
      root_block_device.#:          <computed>
      security_groups.#:            <computed>
      source_dest_check:            "true"
      subnet_id:                    <computed>
      tags.%:                       "1"
      tags.Created-By:              "Terraform"
      tenancy:                      <computed>
      volume_tags.%:                <computed>
      vpc_security_group_ids.#:     <computed>
[0m
[0m[32m  [32m+[0m [32mmodule.hosts.aws_instance.web[0]
[0m      id:                           <computed>
      ami:                          "ami-466768ac"
      associate_public_ip_address:  <computed>
      availability_zone:            <computed>
      ebs_block_device.#:           <computed>
      ephemeral_block_device.#:     <computed>
      get_password_data:            "false"
      instance_state:               <computed>
      instance_type:                "t2.micro"
      ipv6_address_count:           <computed>
      ipv6_addresses.#:             <computed>
      key_name:                     "deployer-key"
      network_interface.#:          <computed>
      network_interface_id:         <computed>
      password_data:                <computed>
      placement_group:              <computed>
      primary_network_interface_id: <computed>
      private_dns:                  <computed>
      private_ip:                   <computed>
      public_dns:                   <computed>
      public_ip:                    <computed>
      root_block_device.#:          <computed>
      security_groups.#:            <computed>
      source_dest_check:            "true"
      subnet_id:                    <computed>
      tags.%:                       "1"
      tags.Created-By:              "Terraform"
      tenancy:                      <computed>
      volume_tags.%:                <computed>
      vpc_security_group_ids.#:     <computed>
[0m
[0m[32m  [32m+[0m [32mmodule.hosts.aws_instance.web[1]
[0m      id:                           <computed>
      ami:                          "ami-466768ac"
      associate_public_ip_address:  <computed>
      availability_zone:            <computed>
      ebs_block_device.#:           <computed>
      ephemeral_block_device.#:     <computed>
      get_password_data:            "false"
      instance_state:               <computed>
      instance_type:                "t2.micro"
      ipv6_address_count:           <computed>
      ipv6_addresses.#:             <computed>
      key_name:                     "deployer-key"
      network_interface.#:          <computed>
      network_interface_id:         <computed>
      password_data:                <computed>
      placement_group:              <computed>
      primary_network_interface_id: <computed>
      private_dns:                  <computed>
      private_ip:                   <computed>
      public_dns:                   <computed>
      public_ip:                    <computed>
      root_block_device.#:          <computed>
      security_groups.#:            <computed>
      source_dest_check:            "true"
      subnet_id:                    <computed>
      tags.%:                       "1"
      tags.Created-By:              "Terraform"
      tenancy:                      <computed>
      volume_tags.%:                <computed>
      vpc_security_group_ids.#:     <computed>
[0m
[0m[32m  [32m+[0m [32mmodule.hosts.aws_instance.web[2]
[0m      id:                           <computed>
      ami:                          "ami-466768ac"
      associate_public_ip_address:  <computed>
      availability_zone:            <computed>
      ebs_block_device.#:           <computed>
      ephemeral_block_device.#:     <computed>
      get_password_data:            "false"
      instance_state:               <computed>
      instance_type:                "t2.micro"
      ipv6_address_count:           <computed>
      ipv6_addresses.#:             <computed>
      key_name:                     "deployer-key"
      network_interface.#:          <computed>
      network_interface_id:         <computed>
      password_data:                <computed>
      placement_group:              <computed>
      primary_network_interface_id: <computed>
      private_dns:                  <computed>
      private_ip:                   <computed>
      public_dns:                   <computed>
      public_ip:                    <computed>
      root_block_device.#:          <computed>
      security_groups.#:            <computed>
      source_dest_check:            "true"
      subnet_id:                    <computed>
      tags.%:                       "1"
      tags.Created-By:              "Terraform"
      tenancy:                      <computed>
      volume_tags.%:                <computed>
      vpc_security_group_ids.#:     <computed>
[0m
[0m
[0m[1mPlan:[0m 7 to add, 0 to change, 0 to destroy.[0m

[0m[1mDo you want to perform these actions?[0m
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  [1mEnter a value:[0m [0myes

[0m[1maws_key_pair.deployer: Creating...[0m
  fingerprint: "" => "<computed>"
  key_name:    "" => "deployer-key"
  public_key:  "" => "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC4sM8tsJZ9MLHMqmxcFpq9IPDuOqsYNOgY7RILou25xj+qZGL6RmAClsGOTh/l5BREx8Ue31yvHkw82tvP+pQ2hgw3MkBDEU2Nq1WV+k74bUXxptZ/MUWq/qUyKXymvbSrdM4mFOdwi8HWF+5XMUvI1CIbxV6Xbrv673FudKNYNP4/9xZ1wxmUnCHTKyfBn28z4K/IQLGeM0Q6Dzjou1M2pEusziXxyo/F8M7IRpHwwMVGPmqKAJagfadGgiYyUb4mEDIL5CSTNMr6dseyQ1UHa2xGCl8qEmk9o8hQQ7mz2zXge1EnQCIg5oeZfGwVGpe+cO1zU0a7T22B6g+9i6s5 luke@Lukes-MBP"[0m
[0m[1maws_key_pair.deployer: Creation complete after 0s (ID: deployer-key)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[1]: Creating...[0m
  ami:                          "" => "ami-466768ac"
  associate_public_ip_address:  "" => "<computed>"
  availability_zone:            "" => "<computed>"
  ebs_block_device.#:           "" => "<computed>"
  ephemeral_block_device.#:     "" => "<computed>"
  get_password_data:            "" => "false"
  instance_state:               "" => "<computed>"
  instance_type:                "" => "t2.micro"
  ipv6_address_count:           "" => "<computed>"
  ipv6_addresses.#:             "" => "<computed>"
  key_name:                     "" => "deployer-key"
  network_interface.#:          "" => "<computed>"
  network_interface_id:         "" => "<computed>"
  password_data:                "" => "<computed>"
  placement_group:              "" => "<computed>"
  primary_network_interface_id: "" => "<computed>"
  private_dns:                  "" => "<computed>"
  private_ip:                   "" => "<computed>"
  public_dns:                   "" => "<computed>"
  public_ip:                    "" => "<computed>"
  root_block_device.#:          "" => "<computed>"
  security_groups.#:            "" => "<computed>"
  source_dest_check:            "" => "true"
  subnet_id:                    "" => "<computed>"
  tags.%:                       "" => "1"
  tags.Created-By:              "" => "Terraform"
  tenancy:                      "" => "<computed>"
  volume_tags.%:                "" => "<computed>"
  vpc_security_group_ids.#:     "" => "<computed>"[0m
[0m[1mmodule.hosts.aws_instance.web[1]: Creating...[0m
  ami:                          "" => "ami-466768ac"
  associate_public_ip_address:  "" => "<computed>"
  availability_zone:            "" => "<computed>"
  ebs_block_device.#:           "" => "<computed>"
  ephemeral_block_device.#:     "" => "<computed>"
  get_password_data:            "" => "false"
  instance_state:               "" => "<computed>"
  instance_type:                "" => "t2.micro"
  ipv6_address_count:           "" => "<computed>"
  ipv6_addresses.#:             "" => "<computed>"
  key_name:                     "" => "deployer-key"
  network_interface.#:          "" => "<computed>"
  network_interface_id:         "" => "<computed>"
  password_data:                "" => "<computed>"
  placement_group:              "" => "<computed>"
  primary_network_interface_id: "" => "<computed>"
  private_dns:                  "" => "<computed>"
  private_ip:                   "" => "<computed>"
  public_dns:                   "" => "<computed>"
  public_ip:                    "" => "<computed>"
  root_block_device.#:          "" => "<computed>"
  security_groups.#:            "" => "<computed>"
  source_dest_check:            "" => "true"
  subnet_id:                    "" => "<computed>"
  tags.%:                       "" => "1"
  tags.Created-By:              "" => "Terraform"
  tenancy:                      "" => "<computed>"
  volume_tags.%:                "" => "<computed>"
  vpc_security_group_ids.#:     "" => "<computed>"[0m
[0m[1mmodule.consul_servers.aws_instance.web[0]: Creating...[0m
  ami:                          "" => "ami-466768ac"
  associate_public_ip_address:  "" => "<computed>"
  availability_zone:            "" => "<computed>"
  ebs_block_device.#:           "" => "<computed>"
  ephemeral_block_device.#:     "" => "<computed>"
  get_password_data:            "" => "false"
  instance_state:               "" => "<computed>"
  instance_type:                "" => "t2.micro"
  ipv6_address_count:           "" => "<computed>"
  ipv6_addresses.#:             "" => "<computed>"
  key_name:                     "" => "deployer-key"
  network_interface.#:          "" => "<computed>"
  network_interface_id:         "" => "<computed>"
  password_data:                "" => "<computed>"
  placement_group:              "" => "<computed>"
  primary_network_interface_id: "" => "<computed>"
  private_dns:                  "" => "<computed>"
  private_ip:                   "" => "<computed>"
  public_dns:                   "" => "<computed>"
  public_ip:                    "" => "<computed>"
  root_block_device.#:          "" => "<computed>"
  security_groups.#:            "" => "<computed>"
  source_dest_check:            "" => "true"
  subnet_id:                    "" => "<computed>"
  tags.%:                       "" => "1"
  tags.Created-By:              "" => "Terraform"
  tenancy:                      "" => "<computed>"
  volume_tags.%:                "" => "<computed>"
  vpc_security_group_ids.#:     "" => "<computed>"[0m
[0m[1mmodule.hosts.aws_instance.web[0]: Creating...[0m
  ami:                          "" => "ami-466768ac"
  associate_public_ip_address:  "" => "<computed>"
  availability_zone:            "" => "<computed>"
  ebs_block_device.#:           "" => "<computed>"
  ephemeral_block_device.#:     "" => "<computed>"
  get_password_data:            "" => "false"
  instance_state:               "" => "<computed>"
  instance_type:                "" => "t2.micro"
  ipv6_address_count:           "" => "<computed>"
  ipv6_addresses.#:             "" => "<computed>"
  key_name:                     "" => "deployer-key"
  network_interface.#:          "" => "<computed>"
  network_interface_id:         "" => "<computed>"
  password_data:                "" => "<computed>"
  placement_group:              "" => "<computed>"
  primary_network_interface_id: "" => "<computed>"
  private_dns:                  "" => "<computed>"
  private_ip:                   "" => "<computed>"
  public_dns:                   "" => "<computed>"
  public_ip:                    "" => "<computed>"
  root_block_device.#:          "" => "<computed>"
  security_groups.#:            "" => "<computed>"
  source_dest_check:            "" => "true"
  subnet_id:                    "" => "<computed>"
  tags.%:                       "" => "1"
  tags.Created-By:              "" => "Terraform"
  tenancy:                      "" => "<computed>"
  volume_tags.%:                "" => "<computed>"
  vpc_security_group_ids.#:     "" => "<computed>"[0m
[0m[1mmodule.consul_servers.aws_instance.web[2]: Creating...[0m
  ami:                          "" => "ami-466768ac"
  associate_public_ip_address:  "" => "<computed>"
  availability_zone:            "" => "<computed>"
  ebs_block_device.#:           "" => "<computed>"
  ephemeral_block_device.#:     "" => "<computed>"
  get_password_data:            "" => "false"
  instance_state:               "" => "<computed>"
  instance_type:                "" => "t2.micro"
  ipv6_address_count:           "" => "<computed>"
  ipv6_addresses.#:             "" => "<computed>"
  key_name:                     "" => "deployer-key"
  network_interface.#:          "" => "<computed>"
  network_interface_id:         "" => "<computed>"
  password_data:                "" => "<computed>"
  placement_group:              "" => "<computed>"
  primary_network_interface_id: "" => "<computed>"
  private_dns:                  "" => "<computed>"
  private_ip:                   "" => "<computed>"
  public_dns:                   "" => "<computed>"
  public_ip:                    "" => "<computed>"
  root_block_device.#:          "" => "<computed>"
  security_groups.#:            "" => "<computed>"
  source_dest_check:            "" => "true"
  subnet_id:                    "" => "<computed>"
  tags.%:                       "" => "1"
  tags.Created-By:              "" => "Terraform"
  tenancy:                      "" => "<computed>"
  volume_tags.%:                "" => "<computed>"
  vpc_security_group_ids.#:     "" => "<computed>"[0m
[0m[1mmodule.hosts.aws_instance.web[2]: Creating...[0m
  ami:                          "" => "ami-466768ac"
  associate_public_ip_address:  "" => "<computed>"
  availability_zone:            "" => "<computed>"
  ebs_block_device.#:           "" => "<computed>"
  ephemeral_block_device.#:     "" => "<computed>"
  get_password_data:            "" => "false"
  instance_state:               "" => "<computed>"
  instance_type:                "" => "t2.micro"
  ipv6_address_count:           "" => "<computed>"
  ipv6_addresses.#:             "" => "<computed>"
  key_name:                     "" => "deployer-key"
  network_interface.#:          "" => "<computed>"
  network_interface_id:         "" => "<computed>"
  password_data:                "" => "<computed>"
  placement_group:              "" => "<computed>"
  primary_network_interface_id: "" => "<computed>"
  private_dns:                  "" => "<computed>"
  private_ip:                   "" => "<computed>"
  public_dns:                   "" => "<computed>"
  public_ip:                    "" => "<computed>"
  root_block_device.#:          "" => "<computed>"
  security_groups.#:            "" => "<computed>"
  source_dest_check:            "" => "true"
  subnet_id:                    "" => "<computed>"
  tags.%:                       "" => "1"
  tags.Created-By:              "" => "Terraform"
  tenancy:                      "" => "<computed>"
  volume_tags.%:                "" => "<computed>"
  vpc_security_group_ids.#:     "" => "<computed>"[0m
[0m[1mmodule.consul_servers.aws_instance.web.1: Still creating... (10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.0: Still creating... (10s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still creating... (10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.2: Still creating... (10s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still creating... (10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still creating... (10s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[0]: Creation complete after 16s (ID: i-0259e37cf4a8f0e26)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.1: Still creating... (20s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.0: Still creating... (20s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web.2: Still creating... (20s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.2: Still creating... (20s elapsed)[0m[0m
[0m[1mmodule.hosts.aws_instance.web.1: Still creating... (20s elapsed)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[1]: Creation complete after 22s (ID: i-0d66d95d3cf14d24c)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[0]: Creation complete after 22s (ID: i-0b10568cd187b5fb5)[0m[0m
[0m[1mmodule.consul_servers.aws_instance.web[2]: Creation complete after 22s (ID: i-07093116875f26c8b)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[2]: Creation complete after 22s (ID: i-01e31b65c205eab03)[0m[0m
[0m[1mmodule.hosts.aws_instance.web[1]: Creation complete after 22s (ID: i-09c75fa7ad09ba7ce)[0m[0m
[0m[1m[32m
Apply complete! Resources: 7 added, 0 changed, 0 destroyed.[0m
[0m[1m[32m
Outputs:

ansible_consul_agents = [
    52.214.247.133,
    34.254.156.55,
    34.240.26.4
]
ansible_consul_master = 34.247.32.92
ansible_consul_servers = [
    34.247.32.92,
    34.242.231.56,
    34.254.202.129
][0m
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws[33m (master)[00m
[1;31m15:30:47[1;37m$ cd ../aws_config/
[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:34:23[1;37m$ [12@(reverse-i-search)`':[Ca': cd ../aws_config/n': ansible-playbook ansible/converge.yml [1@s[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@i[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@b[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@l[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@e[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[19P[1;31m15:34:23[1;37m$[1;31m15:34:23[1;37m$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C

PLAY [all] *****************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************
[0;32mok: [34.254.202.129][0m
[0;32mok: [34.247.32.92][0m
[0;32mok: [52.214.247.133][0m
[0;32mok: [34.254.156.55][0m
[0;32mok: [34.242.231.56][0m
[0;32mok: [34.240.26.4][0m

TASK [consul.lg : install unzip] *******************************************************************************************************
[0;32mok: [34.254.202.129][0m
[0;32mok: [34.254.156.55][0m
[0;32mok: [34.242.231.56][0m
[0;32mok: [52.214.247.133][0m
[0;32mok: [34.247.32.92][0m
[0;32mok: [34.240.26.4][0m

TASK [consul.lg : download consul] *****************************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [52.214.247.133][0m
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [34.240.26.4][0m

TASK [consul.lg : unarchive consul] ****************************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [52.214.247.133][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [34.240.26.4][0m

TASK [consul.lg : create consul user] **************************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [52.214.247.133][0m
[0;33mchanged: [34.240.26.4][0m

TASK [consul.lg : create consul data dir] **********************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [52.214.247.133][0m
[0;33mchanged: [34.240.26.4][0m

TASK [consul.lg : create consul config dir] ********************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [52.214.247.133][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [34.240.26.4][0m

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [34.247.32.92][0m
[0;32mok: [34.242.231.56][0m
[0;32mok: [34.254.202.129][0m
[0;32mok: [52.214.247.133][0m
[0;32mok: [34.254.156.55][0m
[0;32mok: [34.240.26.4][0m

PLAY [consul_servers] ******************************************************************************************************************

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [34.247.32.92][0m
[0;32mok: [34.242.231.56][0m
[0;32mok: [34.254.202.129][0m

TASK [consul.lg : Configure systemd unit] **********************************************************************************************
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.247.32.92][0m

TASK [consul.lg : Template consult config] *********************************************************************************************
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.242.231.56][0m

TASK [consul.lg : enable consul service] ***********************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.247.32.92][0m
[0;33mchanged: [34.242.231.56][0m

PLAY [all:!consul_servers] *************************************************************************************************************

TASK [consul.lg : set_fact] ************************************************************************************************************
[0;32mok: [52.214.247.133][0m
[0;32mok: [34.254.156.55][0m
[0;32mok: [34.240.26.4][0m

TASK [consul.lg : Configure systemd unit] **********************************************************************************************
[0;33mchanged: [34.240.26.4][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [52.214.247.133][0m

TASK [consul.lg : Template consult config] *********************************************************************************************
[0;33mchanged: [34.240.26.4][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [52.214.247.133][0m

TASK [consul.lg : enable consul service] ***********************************************************************************************
[0;33mchanged: [34.240.26.4][0m
[0;33mchanged: [52.214.247.133][0m
[0;33mchanged: [34.254.156.55][0m

PLAY [all:!consul_master] **************************************************************************************************************

TASK [shell] ***************************************************************************************************************************
[0;33mchanged: [34.254.202.129][0m
[0;33mchanged: [34.240.26.4][0m
[0;33mchanged: [34.242.231.56][0m
[0;33mchanged: [34.254.156.55][0m
[0;33mchanged: [52.214.247.133][0m

PLAY RECAP *****************************************************************************************************************************
[0;33m34.240.26.4[0m                : [0;32mok=13  [0m [0;33mchanged=9   [0m unreachable=0    failed=0   
[0;33m34.242.231.56[0m              : [0;32mok=13  [0m [0;33mchanged=9   [0m unreachable=0    failed=0   
[0;33m34.247.32.92[0m               : [0;32mok=12  [0m [0;33mchanged=8   [0m unreachable=0    failed=0   
[0;33m34.254.156.55[0m              : [0;32mok=13  [0m [0;33mchanged=9   [0m unreachable=0    failed=0   
[0;33m34.254.202.129[0m             : [0;32mok=13  [0m [0;33mchanged=9   [0m unreachable=0    failed=0   
[0;33m52.214.247.133[0m             : [0;32mok=13  [0m [0;33mchanged=9   [0m unreachable=0    failed=0   

[0;36mluke[0;37m@[0;36mLukes-MBP-2[00m: [32maws_config[33m (master)[00m
[1;31m15:35:05[1;37m$ 